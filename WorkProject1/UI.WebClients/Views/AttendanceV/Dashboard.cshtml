
@{
    ViewBag.Title = "Student Dashboard";
}



<div>

    <div class="portlet light bordered">
        @*<div class="portlet-title">
            <div class="caption">
                <i class="icon-settings font-green"></i>
                <span class="caption-subject font-green sbold uppercase">Attendance Dashboard</span>
            </div>

        </div>*@
        <div class="portlet-body">
            <div class="table-container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-body ">
                                <div id="activeStudentChart"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="portlet light Top-Absents">
                                    <div class="portlet-title tabbable-line ">
                                        <div class="caption">
                                            <span class="caption-subject font-dark">Top Absents Students List</span>
                                        </div>
                                    </div>
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td style="padding-top: 26px;color:#9A9A9A">15 Days</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td style="padding-top: 26px;color:#9A9A9A">15 Days</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td style="padding-top: 26px;color:#9A9A9A">15 Days</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td style="padding-top: 26px;color:#9A9A9A">15 Days</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-3 pl-0">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="portlet light Top-Absents Leave-List">
                                    <div class="portlet-title tabbable-line ">
                                        <div class="caption">
                                            <span class="caption-subject font-dark">Leave List</span>

                                        </div>
                                    </div>
                                    <table class="table">
                                        <tbody id="listItem">
                                  
                              

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-3 pl-0">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="portlet light Top-Absents Late-list">
                                    <div class="portlet-title tabbable-line ">
                                        <div class="caption">
                                            <span class="caption-subject font-dark">Late in Early out list</span>

                                        </div>
                                    </div>
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td>
                                                    <h4 style="margin-bottom: 0px;margin-top: -16px;font-size: 12px;color: #00BFA2;padding-top: 20px;">7:15</h4>
                                                    <h5 style="color: #D8354D;font-size: 12px !important;">9:15</h5>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td>
                                                    <h4 style="margin-bottom: 0px;margin-top: -10px;font-size: 12px;color: #00BFA2;padding-top: 20px;">7:15</h4>
                                                    <h5 style="color: #D8354D;font-size: 12px !important;">9:14</h5>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td>
                                                    <h4 style="margin-bottom: 0px;margin-top: -16px;font-size: 12px;color: #00BFA2;padding-top: 20px;">7:15</h4>
                                                    <h5 style="color: #D8354D;font-size: 12px !important;">9:15</h5>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td>
                                                    <h4 style="margin-bottom: 0px;margin-top: -16px;font-size: 12px;color: #00BFA2;padding-top: 20px;">7:15</h4>
                                                    <h5 style="color: #D8354D;font-size: 12px !important;">9:15</h5>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-3 pl-0">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="portlet light Top-Absents Absconding-list">
                                    <div class="portlet-title tabbable-line ">
                                        <div class="caption">
                                            <span class="caption-subject font-dark">Absconding Students list</span>

                                        </div>
                                    </div>
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td style="padding-top: 26px;color:#9A9A9A">Class:nine</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td style="padding-top: 26px;color:#9A9A9A">Class:seven</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td style="padding-top: 26px;color:#9A9A9A">Class:Ten</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <img src="~/assets/global/img/avatar2.png" class="tabel-img" alt="">
                                                    <h5>
                                                        <b>Arifa khan</b>
                                                        <p style="color: #9A9A9A;margin-top: 5px !important;">id:30303</p>
                                                    </h5>
                                                </td>
                                                <td style="padding-top: 26px;color:#9A9A9A">Class:nine</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-default">

                            <div class="panel-body">
                                <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>

</div>

@section Scripts{
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/drilldown.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>

    <script>

            var chart;
               $(document).ready(function () {

                   $.get(baseUrl + "Attendance/GetAttendanceDashboardData", function (data) {
                       console.log(data);

                       var leavelist = document.getElementById('listItem');
                       var listItem = "";
                       $.each(data.attenLeavelist, function (i, item) {

                           listItem += " <tr> <td><h5><b>" + item.FullName + "</b> <p style='color: #9A9A9A;margin-top: 5px !important;'>Id:" + item.StudentInsID + "</p></h5></td><td><h4 style='margin-bottom: -1px;margin-top: -16px;font-size: 15px;color: #F4D03F;padding-top: 20px;'>" + item.Status + "</h4><h5 style='color: #D1D1D1;font-size: 12px !important;'>" + item.AddDate + "</h5></td></tr>";

                       });
                       leavelist.innerHTML = listItem;


                       Highcharts.setOptions({
                           colors: ['#666C80', '#D1D1D1', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263', '#6AF9C4']
                       });

                       var colors = Highcharts.getOptions().colors;
                       console.log(colors);

                       categories = ['Main-Bangla', 'Main-English', 'Main-English Medium', 'Mirpur-Bangla', 'Mirpur-English'];
                       name = 'Morning Shift';
                       level = 0;
                       data = [{
                           y: 55.11,
                           drilldown: {
                               name: 'Main-Bangla',
                               categories: ['Class 1', 'Class 2', 'Class 3', 'Class 4'],
                               level: 1,
                               data: [{
                                   y: 33.06,
                                   drilldown: {
                                       level: 2,
                                       name: 'drilldown next level',
                                       categories: ['Section A', 'Section B', 'Section C'],
                                       data: [23, 54, 47],
                                       color: colors[0]
                                   }
                               }, 10.85, 7.35, 2.41],
                               color: colors[0]
                           }
                       }, {
                           y: 21.63,
                           drilldown: {
                               name: 'Main-English',
                               categories: ['Firefox 3.6', 'Firefox 4.0', 'Firefox 3.5', 'Firefox 3.0', 'Firefox 2.0'],
                               data: [13.52, 5.43, 1.58, 0.83, 0.20],
                               color: colors[0]
                           }
                       }, {
                           y: 11.94,
                           drilldown: {
                               name: 'Main-English Medium',
                               categories: ['Chrome 10.0', 'Chrome 11.0', 'Chrome 8.0', 'Chrome 9.0', 'Chrome 12.0',
                                  'Chrome 6.0', 'Chrome 5.0', 'Chrome 7.0'],
                               data: [9.91, 0.50, 0.36, 0.32, 0.22, 0.19, 0.12, 0.12],
                               color: colors[0]
                           }
                       }, {
                           y: 7.15,
                           drilldown: {
                               name: 'Mirpur-Bangla',
                               categories: ['Safari 5.0', 'Safari 4.0', 'Safari Win 5.0', 'Safari 4.1', 'Safari/Maxthon',
                                  'Safari 3.1', 'Safari 41'],
                               data: [4.55, 1.42, 0.23, 0.21, 0.20, 0.19, 0.14],
                               color: colors[0]
                           }
                       }, {
                           y: 2.14,
                           drilldown: {
                               name: 'Mirpur-English',
                               categories: ['Opera 11.x', 'Opera 10.x', 'Opera 9.x'],
                               data: [1.65, 0.37, 0.12],
                               color: colors[0]
                           }
                       }];
                       data2 = [{
                           y: 89.11,
                           drilldown: {
                               name: 'Main-Bangla (Morning)',
                               categories: ['Class 1', 'Class 2', 'Class 3', 'Class 5'],
                               level: 1,
                               data: [{
                                   y: 96.06,
                                   drilldown: {
                                       level: 2,
                                       name: 'Main-Bangla (Morning) - Class 1',
                                       categories: ['Padma', 'Meghna', 'Jamuna'],
                                       data: [23, 54, 47],
                                       color: colors[1]
                                   }
                               }, 10.85, 7.35, 2.41],
                               color: colors[1]
                           }
                       }, {
                           y: 68.63,
                           drilldown: {
                               name: 'Main-English',
                               categories: ['Firefox 3.6', 'Firefox 4.0', 'Firefox 3.5', 'Firefox 3.0', 'Firefox 2.0'],
                               data: [13.52, 5.43, 1.58, 0.83, 0.20],
                               color: colors[1]
                           }
                       }, {
                           y: 52.94,
                           drilldown: {
                               name: 'Main-English Medium',
                               categories: ['Chrome 10.0', 'Chrome 11.0', 'Chrome 8.0', 'Chrome 9.0', 'Chrome 12.0',
                                  'Chrome 6.0', 'Chrome 5.0', 'Chrome 7.0'],
                               data: [9.91, 0.50, 0.36, 0.32, 0.22, 0.19, 0.12, 0.12],
                               color: colors[1]
                           }
                       }, {
                           y: 7.15,
                           drilldown: {
                               name: 'Mirpur-Bangla',
                               categories: ['Safari 5.0', 'Safari 4.0', 'Safari Win 5.0', 'Safari 4.1', 'Safari/Maxthon',
                                  'Safari 3.1', 'Safari 41'],
                               data: [4.55, 1.42, 0.23, 0.21, 0.20, 0.19, 0.14],
                               color: colors[1]
                           }
                       }, {
                           y: 2.14,
                           drilldown: {
                               name: 'Mirpur-English',
                               categories: ['Opera 11.x', 'Opera 10.x', 'Opera 9.x'],
                               data: [1.65, 0.37, 0.12],
                               color: colors[1]
                           }
                       }];
                       function setChart(name, categories, data, color) {
                           //console.log(name, categories, data, color);
                           chart.xAxis[0].setCategories(categories);
                           while (chart.series.length > 0) {
                               chart.series[0].remove(true);
                           }
                           for (var i = 0; i < data.length; i++) {
                               chart.addSeries({
                                   name: name,
                                   data: data[i],
                                   color: color,
                               });
                           }
                       }
                       chart = new Highcharts.Chart({
                           chart: {
                               renderTo: 'activeStudentChart',
                               type: 'column'
                           },
                           title: {
                               text: 'Active Students Analysis',
                               align: 'left',
                               x: 10,
                               y: 10,
                               floating: true

                           },
                           subtitle: {
                               text: 'Session 2018-2019'
                           },
                           credits: {
                               enabled: false
                           },
                           xAxis: {
                               categories: categories
                           },
                           yAxis: {
                               title: {
                                   text: 'No Of Students'
                               }
                           },
                           plotOptions: {
                               column: {
                                   cursor: 'pointer',
                                   point: {
                                       events: {
                                           click: function () {

                                               var drilldown = this.drilldown;
                                               if (drilldown) { // drill down
                                                   setChart(drilldown.name, drilldown.categories, [drilldown.data], drilldown.color);
                                               } else { // restore
                                                   setChart(name, categories, [data, data2], null);
                                               }
                                           }
                                       }
                                   },
                                   dataLabels: {
                                       enabled: true,
                                       color: colors[0],
                                       style: {
                                           fontWeight: 'bold'
                                       },
                                       formatter: function () {
                                           //console.log(this);
                                           return this.y;
                                       }
                                   }
                               }
                           },

                           series: [{
                               name: 'Moring Shift',
                               level: level,
                               data: data,
                               color: colors[0]
                           }, {
                               name: 'Day Shift',
                               level: level,
                               data: data2,
                               color: colors[1]
                           }

                           ],
                           exporting: {
                               enabled: true
                           },
                           legend: {
                               symbolRadius: 2
                           }
                       });

                       HelloWorld = function () {
                           alert("Will Be Implement!!");
                       }

                       // This option should only appear in the Tokyo chart, but ti appears in both
                       chart.options.exporting.buttons.contextButton.menuItems.push({
                           text: "Hide",
                           onclick: HelloWorld
                       });

                       ///stucate - analysis
                       Highcharts.chart('stucate-analysis', {
                           chart: {
                               type: 'column'
                           },
                           title: {
                               text: 'Student Category Summary',
                               align: 'left'
                           },
                           credits: {
                               enabled: false
                           },
                           xAxis: {
                               categories: [
                                   'General',
                                   'Army',
                                   'Others'
                               ],
                               crosshair: true
                           },
                           yAxis: {
                               min: 0,
                               title: {
                                   text: 'No of Students'
                               }
                           },
                           tooltip: {
                               headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                               pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                                   '<td style="padding:0"><b>{point.y:.1f} </b></td></tr>',
                               footerFormat: '</table>',
                               shared: true,
                               useHTML: true
                           },
                           plotOptions: {
                               column: {
                                   pointPadding: 0.2,
                                   borderWidth: 0
                               }
                           },
                           legend: {
                               enabled: false
                           },
                           series: [{
                               name: '',
                               data: [{ y: 50, color: colors[2] },
                                      { y: 78, color: colors[3] },
                                      { y: 20, color: colors[6] }]

                           }]
                       });

                       ///stureligion
                       Highcharts.chart('stureligion-analysis', {
                           chart: {
                               plotBackgroundColor: null,
                               plotBorderWidth: 0,
                               plotShadow: false
                           },
                           title: {
                               text: 'Religion Summary',
                               align: 'left',
                               verticalAlign: 'top'

                           },
                           credits: {
                               enabled: false
                           },
                           tooltip: {
                               pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                           },
                           plotOptions: {
                               pie: {
                                   dataLabels: {
                                       enabled: true,
                                       distance: -50,
                                       style: {
                                           fontWeight: 'bold',
                                           color: 'white'
                                       }
                                   },

                                   size: '100%'
                               }
                           },
                           series: [{
                               type: 'pie',
                               name: 'Religion',
                               data: [
                                     {
                                         name: 'Muslim',
                                         y: 90,
                                         color: colors[8]
                                     },
                                     {
                                         name: 'Hindu',
                                         y: 5
                                     },
                                     {
                                         name: 'Chirstan',
                                         y: 7.61
                                     },
                                     {
                                         name: 'Other',
                                         y: 7.61
                                     }]
                           }]
                       });



                       Highcharts.chart('addmission-progress', {
                           chart: {
                               type: 'spline',
                               scrollablePlotArea: {
                                   minWidth: 600,
                                   scrollPositionX: 1,
                               }
                           },
                           title: {
                               text: 'Yearly Addmission Progress',
                               align: 'left'
                           },
                           credits: {
                               enabled: false
                           },
                           xAxis: {
                               categories: [
                                   'One',
                                   'Two',
                                   'Three',
                                   'Four',
                                   'Five',
                                   'Six',
                                   'Seven',
                                   'Eight',
                               ],
                               crosshair: true
                           },
                           yAxis: {
                               min: 0,
                               title: {
                                   text: 'No of Students'
                               }
                           },
                           tooltip: {
                               headerFormat: '<span style="font-size:10px">Class: {point.key}</span><table>',
                               pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                                   '<td style="padding:0"><b>{point.y} </b></td></tr>',
                               footerFormat: '</table>',
                               shared: true,
                               useHTML: true
                           },
                           plotOptions: {
                               spline: {
                                   lineWidth: 4,
                                   states: {
                                       hover: {
                                           lineWidth: 5
                                       }
                                   },
                               }
                           },
                           legend: {
                               enabled: true
                           },
                           series: [{
                               name: 'Year-2017',
                               data: [{ y: 50, color: colors[0] },
                                      { y: 6, color: colors[0] },
                                      { y: 9, color: colors[0] },
                                      { y: 50, color: colors[0] },
                                      { y: 90, color: colors[0] },
                                      { y: 3, color: colors[0] },
                                      { y: 3, color: colors[0] },
                                      { y: 2, color: colors[0] }]

                           }, {
                               name: 'Year-2018',
                               data: [{ y: 5, color: colors[3] },
                                      { y: 52, color: colors[3] },
                                      { y: 6, color: colors[3] },
                                      { y: 9, color: colors[3] },
                                      { y: 4, color: colors[3] },
                                      { y: 2, color: colors[3] },
                                      { y: 3, color: colors[3] },
                                      { y: 96, color: colors[3] }]

                           }, {
                               name: 'Year-2019',
                               data: [{ y: 67, color: colors[4] },
                                      { y: 52, color: colors[4] },
                                      { y: 60, color: colors[4] },
                                      { y: 90, color: colors[4] },
                                      { y: 48, color: colors[4] },
                                      { y: 20, color: colors[4] },
                                      { y: 32, color: colors[4] },
                                      { y: 12, color: colors[4] }]

                           }



                           ]
                       });

                   });
            });



            Highcharts.chart('container', {
                chart: {
                    type: 'spline'
                },

                title: {
                        text: 'Period wise Attendance status',
                        align: 'left'
                        },
                        xAxis: {
                        categories: [
                            'One',
                            'Two',
                            'Three',
                            'Four',
                            'Five',
                            'Six',
                            'Seven',
                            'Eight',
                            'nine',
                            'Ten',
                        ],
                        crosshair: true
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: 'No of Students'
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:10px">Class: {point.key}</span><table>',
                        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                            '<td style="padding:0"><b>{point.y} </b></td></tr>',
                        footerFormat: '</table>',
                        shared: true,
                        useHTML: true
                    },
                plotOptions: {
                    spline: {
                    marker: {
                        radius: 4,
                        lineColor: '#666666',
                        lineWidth: 1
                    }

                    }

                },

                series: [{
                    name: 'Previous Year',
                    color:'#FC7B52',
                    marker: {

                    },
                    data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, {
                    y: 40.5,

                    }, 23.3, 18.3,]

                },
                {
                    name: 'Current Year',
                    color:'#009DB8',
                    marker: {

                    },
                    data: [{
                    y: 18.9,

                    }, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3,]
                }]
                });
    </script>

}
