
@{
    ViewBag.Title = "Club Config";
}


<div ng-controller="ClubConfigClt">
    <!-- Begin: life time stats -->
    <div class="portlet light bordered">
        <div class="portlet-title">
            <div class="caption">
                <i class="icon-settings font-green"></i>
                <span class="caption-subject font-green sbold uppercase">@ViewBag.Title</span>
            </div>
            <div class="actions">
                <div class="btn-group btn-group-solid">
                    <button ng-click="resetForm()" class="btn green" data-target="#addmodal" data-toggle="modal"> <i class="fa fa-plus"></i> Add Club</button>
                </div>
            </div>
        </div>
        <div class="portlet-body">
            <div class="table-container">
                <div id="sample_3_wrapper" class="dataTables_wrapper no-footer">
                    <div class="row">
                        <div class="col-md-4 col-sm-5 col-xs-6">
                            <div class="form-group">
                                <div class="col-lg-3 col-md-5 col-sm-4 col-xs-8" style="padding-left:0px">
                                    <select class="form-control" ng-model="pageSize" ng-options="P.value as P.text for P in pageSizeArray"></select>
                                </div>
                                <div class="col-md-7  col-sm-8  col-xs-4">
                                    @*<label for="search" class="control-label" style="padding-top:5px">Items</label>*@
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-3 col-xs-1">
                        </div>
                        <div class="col-md-4 col-sm-4 col-xs-5">
                            <div id="sample_3_filter" class="pull-right">
                                <input ng-model="q" id="search" class="form-control" placeholder="Filter text">
                            </div>
                        </div>
                    </div>
                    <div class="table-scrollable"> </div>
                    <table class="table table-bordered table-hover">
                        <thead>
                            <tr class="btn-primary">
                                <th>Day</th>
                                <th class="text-center">Club Name</th>
                                <th class="text-center">Class</th>
                                <th class="text-center">Seat Capacity</th>
                                <th class="text-center">Deadline</th>
                                <th class="text-center">Class Duration</th>
                                <th style="text-align:center">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-show="ClubConfigs.results.length <= 0"><td colspan="13" style="text-align:center;"><i class="fa fa-refresh"></i> Loading new data!!</td></tr>
                            <tr dir-paginate="item in ClubConfigs.results| filter : q |itemsPerPage:pageSize" current-page="currentPage">
                                <td>{{item.DayName}}</td>
                                <td class="text-center">{{item.ClubName}}</td>
                                <td class="text-center">{{item.ClassName}}</td>
                                <td class="text-center">{{item.SeatCapacity}}</td>
                                <td class="text-center">{{item.Deadline | date:"dd//MM/yyyy"}}</td>

                                <td class="text-center">{{item.FromTime | date: "h:mma"}} To {{item.ToTime | date: "h:mma"}}</td>

                                <td align="center">
                                    <a href="" class="btn btn-icon-only green" ng-click="edit(item)" data-target="#updatemodal" data-toggle="modal">
                                        <i class="fa fa-edit"></i>
                                    </a>
                                    <a ng-click="deleteclub(item)" href="" class="btn btn-icon-only red">
                                        <i class="fa fa-trash"></i>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="row">
                        <dir-pagination-controls boundary-links="true" template-url="~/assets/angular/lib/dirPagination.tpl.html"></dir-pagination-controls>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End: life time stats -->
    <!--Modal Add Area Start-->
    <div id="addmodal" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form name="addform" class="form-horizontal" id="form_sample_1" novalidate autocomplete="off">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                        <h4 class="modal-title">{{aemodalTitle}}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.Branch.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Branch :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.BranchId" name="Branch" ng-options="studentInfo.BranchId as studentInfo.BranchName for studentInfo in CommonFeilds.Branch" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addform.Branch.$error.required" class="help-block">Branch Required</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.Session.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Session :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.SessionId" name="Session" ng-options="studentInfo.SessionId as studentInfo.SessionName for studentInfo in CommonFeilds.Session" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addform.Session.$error.required" class="help-block">Session Required</span>

                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.Shift.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Shift :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.ShiftId" ng-disabled="Club.BranchId==null" name="Shift" ng-options="studentInfo.ShiftId as studentInfo.ShiftName for studentInfo in CommonFeilds.Shift| filter:{BranchId:Club.BranchId}:true" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addform.Shift.$error.required" class="help-block">Shift Required</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.ClassID.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Class :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select multiple multi-select ng-model="Club.Class" name="ClassID" required>
                                                <option ng-repeat="Class in CommonFeilds.ClassInfo" value="{{Class.ClassId}}">
                                                    {{Class.ClassName}}
                                                </option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addform.ClassID.$error.required" class="help-block">Class Required</span>
                                        </div>
                                    </div>

                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.DayId.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Days :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.DayId" name="DayId" ng-options="D.Id as D.text for D in Days" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addform.DayId.$error.required" class="help-block">Day Required</span>
                                        </div>
                                    </div>


                                </div>
                                <div class="col-md-6">
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.Deadline.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Application Deadline
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <input class="form-control" required type="text" ng-click="p2=true" ng-value="Club.Deadline | date:'dd/MM/yyyy'" is-open="p2" readonly ng-model="Club.Deadline" name="Deadline" placeholder="Deadline" uib-datepicker-popup="dd/MM/yyyy" />
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addform.Deadline.$error.required" class="help-block">Deadline Required</span>
                                        </div>
                                    </div>

                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.CategoryName.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Category :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.CategoryName" ng-change="getECAClubs(Club.CategoryName)" name="CategoryName" required>
                                                <option value="">Choose Option</option>
                                                <option value="Physical">Physical</option>
                                                <option value="Technical">Technical</option>
                                                <option value="Service">Service</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addform.CategoryName.$error.required" class="help-block">Status Required</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.ClubId.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            ECA Club:
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.ClubId" name="ClubId" ng-options="C.ClubId as C.ClubName for C in ECAClubs.results| filter:{CategoryName:Club.CategoryName}:true" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addform.ClubId.$error.required" class="help-block">ECA Club Required</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.SeatCapacity.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Seat Capacity :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <input class="form-control" placeholder="Seat Capacity" ng-pattern="/^[0-9]\d{0,3}$/" ng-model="Club.SeatCapacity" name="SeatCapacity" />
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addform.SeatCapacity.$error.required" class="help-block">Seat Capacity Required</span>
                                            <span style="color:red" class="help-block" ng-if="addform.SeatCapacity.$error.pattern">Invalid Data.</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.NoOfClass.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            No. of Classes:
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <input class="form-control" placeholder="Number of Classes" ng-pattern="/^[0-9]\d{0,1}$/" max="99" ng-model="Club.NoOfClass" name="NoOfClass" required />
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addform.NoOfClass.$error.required" class="help-block">No. of Classes Required</span>
                                            <span style="color:red" class="help-block" ng-if="addform.NoOfClass.$error.pattern">Invalid Data (Max Class 99).</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.FromTime.$invalid}">
                                        <label class="col-md-6 control-label" style="margin-top: 35px;">
                                            Class Duration From :<span class="required">*</span>
                                        </label>
                                        <div class="col-md-6">
                                            <div uib-timepicker ng-model="Club.FromTime" ng-required="Club.FromTime==null" name="FromTime"
                                                 onkeypress='return event.charCode >= 48 && event.charCode <= 57' ng-change="changed()" readonly-time="false"
                                                 readonly-date="false" disabled-date="false" hour-step="hstep" minute-step="mstep" show-meridian="true"></div>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted &&  addform.FromTime.$error.required" class="help-block">Invalid Time </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addform.ToTime.$invalid}">
                                        <label class="col-md-4 control-label" style="margin-top: 35px;">
                                            To :<span class="required">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <div uib-timepicker ng-model="Club.ToTime" name="ToTime" ng-required="Club.ToTime==null" ng-change="changed()"
                                                 hour-step="hstep" minute-step="mstep" show-meridian="true" readonly-time="true" readonly-date="true"
                                                 disabled-date="true"></div>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted &&  addform.ToTime.$error.required" class="help-block">Invalid Time </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" data-dismiss="modal" class="btn dark btn-outline" submitted=false>Cancel</button>
                        <button type="submit" ng-click="save();submitted=true" class="btn green-haze">Save </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--Modal Add Area End-->
    <!--Modal Update Area Start-->
    
    
    <div id="updatemodal" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form name="addbasic" class="form-horizontal" id="form_sample_1" novalidate autocomplete="off">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                        <h4 class="modal-title">{{aemodalTitle}}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.Branch.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Branch :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.BranchId" name="Branch" ng-options="studentInfo.BranchId as studentInfo.BranchName for studentInfo in CommonFeilds.Branch" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addbasic.Branch.$error.required" class="help-block">Branch Required</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.Session.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Session :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.SessionId" name="Session" ng-options="studentInfo.SessionId as studentInfo.SessionName for studentInfo in CommonFeilds.Session" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addbasic.Session.$error.required" class="help-block">Session Required</span>

                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.Shift.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Shift :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.ShiftId" ng-disabled="Club.BranchId==null" name="Shift" ng-options="studentInfo.ShiftId as studentInfo.ShiftName for studentInfo in CommonFeilds.Shift| filter:{BranchId:Club.BranchId}:true" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addbasic.Shift.$error.required" class="help-block">Shift Required</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.Class.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Class :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.ClassId" name="Class" ng-options="studentInfo.ClassId as studentInfo.ClassName for studentInfo in CommonFeilds.ClassInfo" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                        </div>
                                        <span ng-show="submitted && addbasic.Class.$error.required" class="help-block">Class Required</span>
                                    </div>

                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.Term.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Term :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.TermId" ng-disabled="Club.ClassId==null" name="Term" ng-options="T.TermId as T.Name for T in Terms | filter: {ClassId:Club.ClassId}:true" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addbasic.Term.$error.required" class="help-block">Term Required</span>
                                        </div>

                                    </div>

                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.DayId.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Days :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.DayId" name="DayId" ng-options="D.Id as D.text for D in Days" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addbasic.DayId.$error.required" class="help-block">Day Required</span>
                                        </div>
                                    </div>


                                </div>
                                <div class="col-md-6">
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.Deadline.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Application Deadline
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <input class="form-control" required type="text" ng-click="p2=true" ng-value="Club.Deadline | date:'dd/MM/yyyy'" is-open="p2" readonly ng-model="Club.Deadline" name="Deadline" placeholder="Deadline" uib-datepicker-popup="dd/MM/yyyy" />
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addbasic.Deadline.$error.required" class="help-block">Deadline Required</span>
                                        </div>
                                    </div>

                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.CategoryName.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Category :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.CategoryName" ng-change="getECAClubs(Club.CategoryName)" name="CategoryName" required>
                                                <option value="">Choose Option</option>
                                                <option value="Physical">Physical</option>
                                                <option value="Technical">Technical</option>
                                                <option value="Service">Service</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addbasic.CategoryName.$error.required" class="help-block">Status Required</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.ClubId.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            ECA Club:
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <select class="form-control" ng-model="Club.ClubId" name="ClubId" ng-options="C.ClubId as C.ClubName for C in ECAClubs.results" required>
                                                <option value="" selected="selected">Choose Option</option>
                                            </select>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addbasic.ClubId.$error.required" class="help-block">ECA Club Required</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.SeatCapacity.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            Seat Capacity :
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <input class="form-control" placeholder="Seat Capacity" ng-pattern="/^[0-9]\d{0,3}$/" ng-model="Club.SeatCapacity" name="SeatCapacity" />
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addbasic.SeatCapacity.$error.required" class="help-block">Seat Capacity Required</span>
                                            <span style="color:red" class="help-block" ng-if="addbasic.SeatCapacity.$error.pattern">Invalid Data.</span>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.NoOfClass.$invalid}">
                                        <label class="col-lg-4 col-md-6 col-sm-6 control-label">
                                            No. of Classes:
                                            <span class="required">*</span>
                                        </label>
                                        <div class="col-lg-8 col-md-6 col-sm-6">
                                            <input class="form-control" placeholder="Number of Classes" ng-pattern="/^[0-9]\d{0,1}$/" max="99" ng-model="Club.NoOfClass" name="NoOfClass" required />
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted && addbasic.NoOfClass.$error.required" class="help-block">No. of Classes Required</span>
                                            <span style="color:red" class="help-block" ng-if="addbasic.NoOfClass.$error.pattern">Invalid Data (Max Class 99).</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.FromTime.$invalid}">
                                        <label class="col-md-6 control-label" style="margin-top: 35px;">
                                            Class Duration From :<span class="required">*</span>
                                        </label>
                                        <div class="col-md-6">
                                            <div uib-timepicker ng-model="Club.FromTime" ng-required="Club.FromTime==null" name="FromTime"
                                                 onkeypress='return event.charCode >= 48 && event.charCode <= 57' ng-change="changed()" readonly-time="false"
                                                 readonly-date="false" disabled-date="false" hour-step="hstep" minute-step="mstep" show-meridian="true"></div>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted &&  addbasic.FromTime.$error.required" class="help-block">Invalid Time </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group" ng-class="{ 'has-error' : submitted && addbasic.ToTime.$invalid}">
                                        <label class="col-md-4 control-label" style="margin-top: 35px;">
                                            To :<span class="required">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <div uib-timepicker ng-model="Club.ToTime" name="ToTime" ng-required="Club.ToTime==null" ng-change="changed()"
                                                 hour-step="hstep" minute-step="mstep" show-meridian="true" readonly-time="true" readonly-date="true"
                                                 disabled-date="true"></div>
                                            <div class="form-control-focus"> </div>
                                            <span ng-show="submitted &&  addbasic.ToTime.$error.required" class="help-block">Invalid Time </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" data-dismiss="modal" class="btn dark btn-outline" submitted=false>Cancel</button>
                        <button type="submit" ng-click="save();submitted=true" class="btn green-haze">Save </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--Modal Add Area End-->

</div>



 


 @section Scripts{
    <script type="text/javascript">
            OEMSApp.controller("ClubConfigClt", ["$scope", "$http", "SweetAlert",
               function ($scope, $http, SweetAlert) {
                   init();
                   function init() {
                       initialize();
                       getClubConfigs(1);
                       getECAClubs(1);
                       getTerms();

                   }
                   function initialize() {
                       $scope.aemodalTitle = "Add ECA Club Config";
                       $scope.ecaClubName = '';
                       $scope.currentPage = 1;
                       $scope.pageno = 1;
                       $scope.pagesize = 10;
                       $scope.total_count = 12;
                       $scope.search = '';
                       $scope.ECAClubs = [];
                       $scope.ClubConfigs = [];


                       $scope.getClubConfigs = getClubConfigs;
                       $scope.res = {};
                       $scope.data = {};
                       $scope.resetForm = resetForm;
                       $scope.hstep = 1;
                       $scope.mstep = 15;
                       $scope.Club = {};
                       $scope.Filedhide = false;

                       $scope.Club.Id = 0;
                       //Common Field
                       $scope.CommonFeilds = [];


                       getAllCommons();
                       //$scope.Terms = [];
                       //$scope.Terms.push({ Id: 1, text: 'Autumn' }, { Id: 2, text: 'Winter' }, { Id: 3, text: 'Summer' })

                       $scope.Days = [];
                       $scope.Days.push(
                                         { Id: 2, text: 'Sunday' },
                                          { Id: 3, text: 'Monday' },
                                          { Id: 4, text: 'Tuesday' });
                      // console.log($scope.Days);


                       $scope.pageSizeArray = [];
                       $scope.pageSizeArray.push({ value: 5, text: 5 });
                       $scope.pageSizeArray.push({ value: 10, text: 10 });
                       $scope.pageSizeArray.push({ value: 20, text: 20 });
                       $scope.pageSizeArray.push({ value: 50, text: 50 });
                       $scope.currentPage = 1;
                       $scope.pageSize = 10;
                   }
                   function resetForm() {
                       $scope.aemodalTitle = "Add ECA Club Config";
                       $scope.Club = {};
                        $scope.Club.Id = 0;
           
                        $scope.submitted = false;
                        $scope.Filedhide = false;


                   }
                   function getTerms() {
                       $scope.Terms = [];
                       $http({
                           method: 'GET',
                           url: baseUrl + 'SetupInstitution/GetAllTerm/'
                       }).then(function successCallback(response) {
                           // this callback will be called asynchronously
                           // when the response is available
                           $scope.Terms = response.data.results;
                           //console.log($scope.Terms);
                           // $scope.AspNetRoles = response.data;
                           $scope.total_count = response.data.totalcount;
                           //console.log(response.data);
                       }, function errorCallback(response) {
                           toastr["warning"](response.data.Message);
                       });

                   }
                   function getClubConfigs() {

                       

                       $scope.ClubConfigs = [];
                       $http({
                           method: 'GET',
                           url: baseUrl + 'SetupInstitution/GetAllClubConfig/'
                       }).then(function successCallback(response) {
                           // this callback will be called asynchronously
                           // when the response is available
                           $scope.ClubConfigs = response.data;
                           $scope.total_count = response.data.totalcount;
                           console.log(response.data);
                       }, function errorCallback(response) {
                           toastr["warning"](response.data.Message);
                       });
                   }
                   $scope.getECAClubs =   function getECAClubs(n) {
                       $scope.ECAClubs = [];
                       $http({
                           method: 'GET',
                           url: baseUrl + 'SetupInstitution/GetAllECAClubByCategory/' + n
                       }).then(function successCallback(response) {

                           $scope.ECAClubs = response.data;
                           $scope.total_count = response.data.totalcount;
                           //console.log(response.data);
                       }, function errorCallback(response) {
                           toastr["warning"](response.data.Message);
                       });
                   }
                   $scope.searchData = function () {
                       getECAClubs(1);
                       // $scope.total_count = 88;
                   };
                   $scope.edit = function (n) {
                       $scope.aemodalTitle = "Update Club Config";
                       $scope.Club = n;
                       $scope.Club.Id = n.Id;
                       $scope.Filedhide = true;
                       $scope.Club.Deadline = new Date($scope.Club.Deadline);
                       //alert($scope.Club.Deadline);
                   };
                   $scope.save = function save() {
                       //console.log($scope.addbasic.NoOfClass.$modelValue);
                    
                       
                       if ($scope.Club.Id != 0) /// For Update
                       {
                           if ($scope.addbasic.$invalid)
                               return;
                           $http({
                                   method: 'PUT',
                                   url: baseUrl + 'SetupInstitution/UpdateClubConfig/',
                                   data: $scope.Club
                               }).then(function successCallback(response) {
                                   $('#updatemodal').modal('toggle');
                                   getClubConfigs(1);
                                   toastr["info"](response.data.message);
                                   resetForm();
                               }, function errorCallback(response) {
                                   toastr["warning"](response.data.Message);
                               });

                       } else {  //  For Add
                          
                           if ($scope.addform.$invalid)
                               return;

                           //if ($scope.addform.NoOfClass.$modelValue > 99) {
                           //    toastr["warning"]("Maximum No of Class 99.");
                           //    return;
                           //}
                               $http({
                                   method: 'POST',
                                   url: baseUrl + 'SetupInstitution/AddClubConfig/',
                                   data: $scope.Club
                               }).then(function successCallback(response) {
                                   $('#addmodal').modal('toggle');
                                   getClubConfigs(1);
                                   toastr["info"](response.data.message);
                                   resetForm();
                               }, function errorCallback(response) {
                                   toastr["warning"](response.data.Message);
                               });

                       }
                   };
                   function getECAClubs() {
                       $scope.ECAClubs = [];
                       $http({
                           method: 'GET',
                           url: baseUrl + 'SetupInstitution/GetAllECAClub/'
                       }).then(function successCallback(response) {
                           // this callback will be called asynchronously
                           // when the response is available
                           $scope.ECAClubs = response.data;
                           // $scope.AspNetRoles = response.data;
                           $scope.total_count = response.data.totalcount;
                           //console.log(response.data);
                       }, function errorCallback(response) {
                           toastr["warning"](response.data.Message);
                       });
                   }
                   $scope.deleteclub = function deleteclub(n) {
                       SweetAlert.swal({
                           title: "Are you sure to delete it ?", type: "warning", showCancelButton: true, confirmButtonColor: "#DD6B55",
                           confirmButtonText: "Yes, delete it!",
                           closeOnConfirm: false
                       },
                       function (isConfirm) {
                           if (isConfirm) {
                               $http({
                                   method: 'DELETE',
                                   url: baseUrl + 'SetupInstitution/DeleteClubConfig/' + n.Id,
                                   data: $scope.class
                               }).then(function successCallback(response) {
                                   SweetAlert.swal("Deleted!", "Your data has been deleted.", "success");
                                   getClubConfigs(1);
                               }, function errorCallback(response) {
                                   toastr["warning"](response.data.Message);
                               });
                           }
                       });
                   };


                   function getAllCommons() {
                       $scope.CommonFeilds = [];
                       $http({
                           method: 'GET',
                           url: baseUrl + 'Common/GetCommonItem/'
                       }).then(function successCallback(response) {
                           $scope.CommonFeilds = response.data.results;
                       }, function errorCallback(response) {
                           toastr["error"](response.data.Message);
                       });
                   };
               }]);
    </script>
}




